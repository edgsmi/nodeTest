
const connectionUtil = require('connectionUtil');
const util2 = require('util2');
const promise = require('promise');


function getPlaformList() {
  var connection = util2.getConnectionJdbc(function(connection) {callBackGetConnectionJdbc(connection)});
}

function callBackGetConnectionJdbc(connection) {
  //var request = "select name, host from PLATFORM_CONNECTION where host = '" + "eces.db.ntt.preprod.org" + "'";
  var request = "select name, host from PLATFORM_CONNECTION where enabled = 'Y'";
  connectionUtil.initConnection(connection.login, connection.pwd, connection.host, connection.port, connection.sid, request, function(a) {callBackInitConnection(a)});
}

function callBackInitConnection(data) {

  for (var d in data) { 
    console.log(data[d][0]);
  }

  //console.log(data);
}



function getPlaformList2() {
  var connection = util2.getConnectionJdbc(function(connection) {callBackGetConnectionJdbc2(connection)});
}


function callBackGetConnectionJdbc2(connection) {

//	var pReadFile = promise.denodeify()
//  var connection = util2.getConnectionJdbc(function(connection) {callBackGetConnectionJdbc(connection)});

	var request = "select name, host from PLATFORM_CONNECTION where enabled = 'Y'";

	// connectionUtil.initConnection(connection.login, connection.pwd, connection.host, connection.port, connection.sid, request).then(function (content) {
	// 	console.error('Success !');
	// 	console.log(content);
	// }, function (err) {
	// 	console.error('Erreur !');
 //    	console.dir(err);


	// });

	connectionUtil.initConnection(connection.login, connection.pwd, connection.host, connection.port, connection.sid, request);

}





exports.getPlaformList = getPlaformList;                                                                                                                             
exports.getPlaformList2 = getPlaformList2;