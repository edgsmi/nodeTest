function readJsonFile(file, encoding, callback) {
	var fs = require('fs');
	var data = '';

	fs.readFile(file, encoding, function (err, d) {
	  if (err) {
	    console.error('Error: ' + err);
	    //throw err;// we'll not consider error handling for now
	    return;
	  }

	  //data = JSON.parse(d);
	  try {
	     data = JSON.parse(d);
	  } catch(e) {
	  	throw new Error("data is corrupted")
	  }

	  //console.dir(data);
	 //console.log(data);
	  //console.log(JSON.stringify(data));
		callback(data);  
	});
}

function readJsonFileSync(file, encoding) {
  var fs = require('fs');
  var data = JSON.parse(fs.readFileSync(file, encoding));   
  return data; 
}


function readJsonFileFromDir(dirName, fileName, encoding, callback) {
	return readJsonFile(dirName + "/" + fileName, encoding, callback);
	//var data = readJsonFileSync(dirName + "/" + fileName, encoding);
	//console.log(data);
	//return data;
}


exports.readJsonFileFromDir = readJsonFileFromDir;
exports.readJsonFile = readJsonFile;